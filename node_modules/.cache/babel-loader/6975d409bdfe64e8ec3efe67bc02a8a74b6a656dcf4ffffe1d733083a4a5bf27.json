{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.OrderBuilder = void 0;\nconst tslib_1 = require(\"tslib\");\nconst order_utils_1 = require(\"@polymarket/order-utils\");\nconst helpers_1 = require(\"./helpers\");\nclass OrderBuilder {\n  constructor(signer, chainId, signatureType, funderAddress, getSigner) {\n    this.signer = signer;\n    this.chainId = chainId;\n    this.signatureType = signatureType === undefined ? order_utils_1.SignatureType.EOA : signatureType;\n    this.funderAddress = funderAddress;\n    this.getSigner = getSigner;\n  }\n  /**\n   * Generate and sign a order\n   */\n  buildOrder(userOrder, options) {\n    return tslib_1.__awaiter(this, void 0, void 0, function* () {\n      const signer = yield this.resolveSigner();\n      return (0, helpers_1.createOrder)(signer, this.chainId, this.signatureType, this.funderAddress, userOrder, options);\n    });\n  }\n  /**\n   * Generate and sign a market order\n   */\n  buildMarketOrder(userMarketOrder, options) {\n    return tslib_1.__awaiter(this, void 0, void 0, function* () {\n      const signer = yield this.resolveSigner();\n      return (0, helpers_1.createMarketOrder)(signer, this.chainId, this.signatureType, this.funderAddress, userMarketOrder, options);\n    });\n  }\n  /** Unified getter: use fresh signer if available */\n  resolveSigner() {\n    return tslib_1.__awaiter(this, void 0, void 0, function* () {\n      if (this.getSigner) {\n        const s = yield this.getSigner();\n        if (!s) throw new Error(\"getSigner() function returned undefined or null\");\n        return s;\n      }\n      return this.signer;\n    });\n  }\n}\nexports.OrderBuilder = OrderBuilder;","map":{"version":3,"names":["order_utils_1","require","helpers_1","OrderBuilder","constructor","signer","chainId","signatureType","funderAddress","getSigner","undefined","SignatureType","EOA","buildOrder","userOrder","options","resolveSigner","createOrder","buildMarketOrder","userMarketOrder","createMarketOrder","s","Error","exports"],"sources":["../../src/order-builder/builder.ts"],"sourcesContent":[null],"mappings":";;;;;;;AAEA,MAAAA,aAAA,GAAAC,OAAA;AACA,MAAAC,SAAA,GAAAD,OAAA;AAGA,MAAaE,YAAY;EAsBrBC,YACIC,MAA8B,EAC9BC,OAAc,EACdC,aAA6B,EAC7BC,aAAsB,EACtBC,SAA4E;IAE5E,IAAI,CAACJ,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACC,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACC,aAAa,GAAGA,aAAa,KAAKG,SAAS,GAAGV,aAAA,CAAAW,aAAa,CAACC,GAAG,GAAGL,aAAa;IACpF,IAAI,CAACC,aAAa,GAAGA,aAAa;IAClC,IAAI,CAACC,SAAS,GAAGA,SAAS;EAC9B;EAEA;;;EAGaI,UAAUA,CACnBC,SAAoB,EACpBC,OAA2B;;MAE3B,MAAMV,MAAM,GAAG,MAAM,IAAI,CAACW,aAAa,EAAE;MACzC,OAAO,IAAAd,SAAA,CAAAe,WAAW,EACdZ,MAAM,EACN,IAAI,CAACC,OAAO,EACZ,IAAI,CAACC,aAAa,EAClB,IAAI,CAACC,aAAa,EAClBM,SAAS,EACTC,OAAO,CACV;IACL,CAAC;;EAED;;;EAGaG,gBAAgBA,CACzBC,eAAgC,EAChCJ,OAA2B;;MAE3B,MAAMV,MAAM,GAAG,MAAM,IAAI,CAACW,aAAa,EAAE;MACzC,OAAO,IAAAd,SAAA,CAAAkB,iBAAiB,EACpBf,MAAM,EACN,IAAI,CAACC,OAAO,EACZ,IAAI,CAACC,aAAa,EAClB,IAAI,CAACC,aAAa,EAClBW,eAAe,EACfJ,OAAO,CACV;IACL,CAAC;;EAED;EACcC,aAAaA,CAAA;;MACvB,IAAI,IAAI,CAACP,SAAS,EAAE;QAChB,MAAMY,CAAC,GAAG,MAAM,IAAI,CAACZ,SAAS,EAAE;QAChC,IAAI,CAACY,CAAC,EAAE,MAAM,IAAIC,KAAK,CAAC,iDAAiD,CAAC;QAC1E,OAAOD,CAAC;;MAEZ,OAAO,IAAI,CAAChB,MAAM;IACtB,CAAC;;;AAhFLkB,OAAA,CAAApB,YAAA,GAAAA,YAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}