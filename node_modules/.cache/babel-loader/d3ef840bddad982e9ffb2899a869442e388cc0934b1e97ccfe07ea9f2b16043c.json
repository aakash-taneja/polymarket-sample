{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createL2Headers = exports.createL1Headers = void 0;\nconst tslib_1 = require(\"tslib\");\nconst signing_1 = require(\"../signing\");\nconst createL1Headers = (signer, chainId, nonce) => tslib_1.__awaiter(void 0, void 0, void 0, function* () {\n  const ts = Math.floor(Date.now() / 1000);\n  let n = 0; // Default nonce is 0\n  if (nonce !== undefined) {\n    n = nonce;\n  }\n  const sig = yield (0, signing_1.buildClobEip712Signature)(signer, chainId, ts, n);\n  const address = yield signer.getAddress();\n  const headers = {\n    POLY_ADDRESS: address,\n    POLY_SIGNATURE: sig,\n    POLY_TIMESTAMP: `${ts}`,\n    POLY_NONCE: `${n}`\n  };\n  return headers;\n});\nexports.createL1Headers = createL1Headers;\nconst createL2Headers = (signer, creds, l2HeaderArgs) => tslib_1.__awaiter(void 0, void 0, void 0, function* () {\n  const address = yield signer.getAddress();\n  const ts = Math.floor(Date.now() / 1000);\n  const sig = (0, signing_1.buildPolyHmacSignature)(creds.secret, ts, l2HeaderArgs.method, l2HeaderArgs.requestPath, l2HeaderArgs.body);\n  const headers = {\n    POLY_ADDRESS: address,\n    POLY_SIGNATURE: sig,\n    POLY_TIMESTAMP: `${ts}`,\n    POLY_API_KEY: creds.key,\n    POLY_PASSPHRASE: creds.passphrase\n  };\n  return headers;\n});\nexports.createL2Headers = createL2Headers;","map":{"version":3,"names":["signing_1","require","createL1Headers","signer","chainId","nonce","tslib_1","__awaiter","ts","Math","floor","Date","now","n","undefined","sig","buildClobEip712Signature","address","getAddress","headers","POLY_ADDRESS","POLY_SIGNATURE","POLY_TIMESTAMP","POLY_NONCE","exports","createL2Headers","creds","l2HeaderArgs","buildPolyHmacSignature","secret","method","requestPath","body","POLY_API_KEY","key","POLY_PASSPHRASE","passphrase"],"sources":["../../src/headers/index.ts"],"sourcesContent":[null],"mappings":";;;;;;;AAEA,MAAAA,SAAA,GAAAC,OAAA;AAGO,MAAMC,eAAe,GAAGA,CAC3BC,MAA8B,EAC9BC,OAAc,EACdC,KAAc,KACSC,OAAA,CAAAC,SAAA;EACvB,MAAMC,EAAE,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACC,GAAG,EAAE,GAAG,IAAI,CAAC;EACxC,IAAIC,CAAC,GAAG,CAAC,CAAC,CAAC;EACX,IAAIR,KAAK,KAAKS,SAAS,EAAE;IACrBD,CAAC,GAAGR,KAAK;;EAGb,MAAMU,GAAG,GAAG,MAAM,IAAAf,SAAA,CAAAgB,wBAAwB,EAACb,MAAM,EAAEC,OAAO,EAAEI,EAAE,EAAEK,CAAC,CAAC;EAClE,MAAMI,OAAO,GAAG,MAAMd,MAAM,CAACe,UAAU,EAAE;EAEzC,MAAMC,OAAO,GAAG;IACZC,YAAY,EAAEH,OAAO;IACrBI,cAAc,EAAEN,GAAG;IACnBO,cAAc,EAAE,GAAGd,EAAE,EAAE;IACvBe,UAAU,EAAE,GAAGV,CAAC;GACnB;EACD,OAAOM,OAAO;AAClB,CAAC;AArBYK,OAAA,CAAAtB,eAAe,GAAAA,eAAA;AAuBrB,MAAMuB,eAAe,GAAGA,CAC3BtB,MAA8B,EAC9BuB,KAAkB,EAClBC,YAA0B,KACHrB,OAAA,CAAAC,SAAA;EACvB,MAAMU,OAAO,GAAG,MAAMd,MAAM,CAACe,UAAU,EAAE;EACzC,MAAMV,EAAE,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACC,GAAG,EAAE,GAAG,IAAI,CAAC;EAExC,MAAMG,GAAG,GAAG,IAAAf,SAAA,CAAA4B,sBAAsB,EAC9BF,KAAK,CAACG,MAAM,EACZrB,EAAE,EACFmB,YAAY,CAACG,MAAM,EACnBH,YAAY,CAACI,WAAW,EACxBJ,YAAY,CAACK,IAAI,CACpB;EAED,MAAMb,OAAO,GAAG;IACZC,YAAY,EAAEH,OAAO;IACrBI,cAAc,EAAEN,GAAG;IACnBO,cAAc,EAAE,GAAGd,EAAE,EAAE;IACvByB,YAAY,EAAEP,KAAK,CAACQ,GAAG;IACvBC,eAAe,EAAET,KAAK,CAACU;GAC1B;EAED,OAAOjB,OAAO;AAClB,CAAC;AAzBYK,OAAA,CAAAC,eAAe,GAAAA,eAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}